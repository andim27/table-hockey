//AS3ExporterAIR version 2.3, code Flash 10, generated by Prefab3D: http://www.closier.nl/prefab
package katok
{
	import away3d.containers.ObjectContainer3D;
	import away3d.containers.Scene3D;
	import away3d.materials.*;
	import away3d.core.base.*;
	import away3d.core.utils.Init;
	import away3d.loaders.utils.*;
	import away3d.loaders.data.*;
	import flash.utils.Dictionary;
	import away3d.primitives.*;
	import flash.display.Bitmap;
	import flash.display.BitmapData;

	import away3d.core.math.*;

	public class Katok_model extends ObjectContainer3D
	{
		[Embed(source="images/bort_right.png")]
		private var Bort_right_Bitmap_Bitmap:Class;

		[Embed(source="images/bort_bottom.png")]
		private var Bort_bottom_Bitmap_Bitmap:Class;

		[Embed(source="images/bort_left.png")]
		private var Bort_left_Bitmap_Bitmap:Class;

		[Embed(source="images/bort_top.png")]
		private var Bort_top_Bitmap_Bitmap:Class;

		[Embed(source="images/Cube.png")]
		private var Cube_Bitmap_Bitmap:Class;

		[Embed(source="images/Ice.jpg")]
		private var Ice_Bitmap_Bitmap:Class;

		private var objs:Object = {};
		private var geos:Array = [];
		private var oList:Array =[];
		private var aC:Array;
		private var aV:Array;
		private var aU:Array;
		private var _scale:Number;

		public function Katok_model(init:Object = null)
		{
			var ini:Init = Init.parse(init);
			_scale = ini.getNumber("scaling", 1);
			setSource();
			addContainers();
			buildMeshes();
			buildMaterials();
			cleanUp();
		}

		private function buildMeshes():void
		{
			var m0:MatrixAway3D = new MatrixAway3D();
			m0.sxx = 1;
			m0.sxy = 0;
			m0.sxz = 0;
			m0.tx = -0.3426567614078522*_scale;
			m0.syx = 0;
			m0.syy = 1;
			m0.syz = 0;
			m0.ty = -0.5340512990951538*_scale;
			m0.szx = 0;
			m0.szy = 0;
			m0.szz = 1;
			m0.tz = 30.98613154888153*_scale;

			objs.obj0 = {name:"bort_right",  transform:m0, pivotPoint:new Number3D(0,0,0), container:1, bothsides:false, material:null, ownCanvas:false, pushfront:false, pushback:false};
			objs.obj0.geo=geos[0];
			var m1:MatrixAway3D = new MatrixAway3D();
			m1.sxx = 1;
			m1.sxy = 0;
			m1.sxz = 0;
			m1.tx = 15.316123604774475*_scale;
			m1.syx = 0;
			m1.syy = 1;
			m1.syz = 0;
			m1.ty = -0.515721321105957*_scale;
			m1.szx = 0;
			m1.szy = 0;
			m1.szz = 1;
			m1.tz = 59.29899787902832*_scale;

			objs.obj1 = {name:"bort_bottom",  transform:m1, pivotPoint:new Number3D(0,0,0), container:1, bothsides:false, material:null, ownCanvas:false, pushfront:false, pushback:false};
			objs.obj1.geo=geos[1];
			var m2:MatrixAway3D = new MatrixAway3D();
			m2.sxx = 1;
			m2.sxy = 0;
			m2.sxz = 0;
			m2.tx = 30.918472290039063*_scale;
			m2.syx = 0;
			m2.syy = 1;
			m2.syz = 0;
			m2.ty = -0.5308123826980591*_scale;
			m2.szx = 0;
			m2.szy = 0;
			m2.szz = 1;
			m2.tz = 31.26710867881775*_scale;

			objs.obj2 = {name:"bort_left",  transform:m2, pivotPoint:new Number3D(0,0,0), container:1, bothsides:false, material:null, ownCanvas:false, pushfront:false, pushback:false};
			objs.obj2.geo=geos[2];
			var m3:MatrixAway3D = new MatrixAway3D();
			m3.sxx = 1;
			m3.sxy = 0;
			m3.sxz = 0;
			m3.tx = 15.457834422588348*_scale;
			m3.syx = 0;
			m3.syy = 1;
			m3.syz = 0;
			m3.ty = -0.515721321105957*_scale;
			m3.szx = 0;
			m3.szy = 0;
			m3.szz = 1;
			m3.tz = 2.313973218202591*_scale;

			objs.obj3 = {name:"bort_top",  transform:m3, pivotPoint:new Number3D(0,0,0), container:1, bothsides:false, material:null, ownCanvas:false, pushfront:false, pushback:false};
			objs.obj3.geo=geos[3];
			var m4:MatrixAway3D = new MatrixAway3D();
			m4.sxx = 1;
			m4.sxy = 0;
			m4.sxz = 0;
			m4.tx = 15.490260243415833*_scale;
			m4.syx = 0;
			m4.syy = 1;
			m4.syz = 0;
			m4.ty = -1.4090063571929932*_scale;
			m4.szx = 0;
			m4.szy = 0;
			m4.szz = 1;
			m4.tz = 30.883207201957703*_scale;

			objs.obj4 = {name:"Cube",  transform:m4, pivotPoint:new Number3D(0,0,0), container:1, bothsides:false, material:null, ownCanvas:false, pushfront:false, pushback:false};
			objs.obj4.geo=geos[4];
			var m5:MatrixAway3D = new MatrixAway3D();
			m5.sxx = 1;
			m5.sxy = 0;
			m5.sxz = 0;
			m5.tx = 14.969133843667805*_scale;
			m5.syx = 0;
			m5.syy = 1;
			m5.syz = 0;
			m5.ty = -2.2972689270973206*_scale;
			m5.szx = 0;
			m5.szy = 0;
			m5.szz = 1;
			m5.tz = 30.64709883928299*_scale;

			objs.obj5 = {name:"Ice",  transform:m5, pivotPoint:new Number3D(0,0,0), container:1, bothsides:false, material:null, ownCanvas:false, pushfront:false, pushback:false};
			objs.obj5.geo=geos[5];

			var ref:Object;
			var mesh:Mesh;
			var j:int;
			var av:Array;
			var au:Array;
			var v0:Vertex;
			var v1:Vertex;
			var v2:Vertex;
			var u0:UV;
			var u1:UV;
			var u2:UV;
			var aRef:Array ;
			for(var i:int = 0;i<6;++i){
				ref = objs["obj"+i];
				if(ref != null){
					mesh = new Mesh();
					mesh.type = ".as";
					mesh.bothsides = ref.bothsides;
					mesh.name = ref.name;
					mesh.pushfront = ref.pushfront;
					mesh.pushback = ref.pushback;
					mesh.ownCanvas = ref.ownCanvas;
					if(aC[ref.container]!= null)
						aC[ref.container].addChild(mesh);

					oList.push(mesh);
					mesh.transform = ref.transform;
					mesh.movePivot(ref.pivotPoint.x, ref.pivotPoint.y, ref.pivotPoint.z);
					if (ref.geo.geometry != null) {
						mesh.geometry = ref.geo.geometry;
						continue;
					}
					ref.geo.geometry = new Geometry();
					mesh.geometry = ref.geo.geometry;
					aRef = ref.geo.f.split(",");
					for(j = 0;j<aRef.length;j+=6){
						try{
							av = ref.geo.aV[parseInt(aRef[j], 16)].split("/");
							v0 = new Vertex(Number(parseFloat(av[0]))*_scale, Number(parseFloat(av[1]))*_scale, Number(parseFloat(av[2]))*_scale);
							av = ref.geo.aV[parseInt(aRef[j+1],16)].split("/");
							v1 = new Vertex(Number(parseFloat(av[0]))*_scale, Number(parseFloat(av[1]))*_scale, Number(parseFloat(av[2]))*_scale);
							av = ref.geo.aV[parseInt(aRef[j+2],16)].split("/");
							v2 = new Vertex(Number(parseFloat(av[0]))*_scale, Number(parseFloat(av[1]))*_scale, Number(parseFloat(av[2]))*_scale);
							au = ref.geo.aU[parseInt(aRef[j+3],16)].split("/");
							u0 = new UV(parseFloat(au[0]), parseFloat(au[1]));
							au = ref.geo.aU[parseInt(aRef[j+4],16)].split("/");
							u1 = new UV(parseFloat(au[0]), parseFloat(au[1]));
							au = ref.geo.aU[parseInt(aRef[j+5],16)].split("/");
							u2 = new UV(parseFloat(au[0]), parseFloat(au[1]));
							ref.geo.geometry.addFace( new Face(v0, v1, v2, ref.material, u0, u1, u2) );
						}catch(e:Error){
							trace("obj"+i+": ["+aV[parseInt(aRef[j],16)].split("/")+"],["+aV[parseInt(aRef[j+1],16)].split("/")+"],["+aV[parseInt(aRef[j+2],16)].split("/")+"]");
							trace("     uvs: ["+aV[parseInt(aRef[j+3],16)].split("/")+"],["+aV[parseInt(aRef[j+4],16)].split("/")+"],["+aU[parseInt(aRef[j+5],16)].split("/")+"]");
						}
					}
				}
			}
		}

		private function setSource():void
		{
			var geo0:Object = {};
			geo0.aVstr="0.2268/-2.dd4/1a.178c,1.4a8/2.dd4/1b.01c9,-1.4a8/-2.dd4/1a.178c,-0.2268/2.dd4/1b.01c9,-0.2268/2.dd4/-1a.2547,1.4a8/2.dd4/-1a.2547,-1.4a8/-2.dd4/-1b.01c9,0.2268/-2.dd4/-1b.01c9";
			geo0.aUstr="0.1613bc96ad4bf2/0.0053986904f98328,0.1930e3ee86734b/0.0053986904f98328,0.1613bc96ad4bf2/0.23718be6f994c4,0.1930e3ee86734b/0.23718be6f994c4,0.168138b954c90b/0,0.17edc635ce3706/0,0.168138b954c90b/1,0.17edc635ce3706/1,0.1cbb4f9f1e6442/0.270f,0.1cbb4f9f1e6442/0.000188c9bcd1004dd,0.193cc01d394de3/0.270f,0.193cc01d394de3/0.000188c9bcd1004dd,1/0,0/0,1/1,0/1,0.1654ede09eb3a7/0,0.17ef1c6fb98f87/0,0.1654ede09eb3a7/1,0.17ef1c6fb98f87/1,0.1cc2e30adaf6e3/0,0.1e5fab98b08fb7/0,0.1cc2e30adaf6e3/1,0.1e5fab98b08fb7/1";
			geo0.aV= read(geo0.aVstr).split(",");
			geo0.aU= read(geo0.aUstr).split(",");
			geo0.f="0,1,2,0,1,2,2,1,3,2,1,3,4,5,6,4,5,6,6,5,7,6,5,7,5,1,7,8,9,a,7,1,0,a,9,b,7,0,6,c,d,e,6,0,2,e,d,f,6,2,4,10,11,12,4,2,3,12,11,13,1,5,3,14,15,16,3,5,4,16,15,17";
			geos.push(geo0);
			var geo1:Object = {};
			geo1.aVstr="-b.c6a/-2.f0a/1.1284,c.4d3/-2.f0a/1.1284,-c.ce5/-2.f0a/2.262e,d.54e/-2.f0a/2.262e,-e.1edf/-2.f0a/-2.252c,-10.16ef/-2.f0a/-2.20d4,10.16ef/-2.f0a/-1.1284,f.14c3/-2.f0a/-2.262e,f.14c3/2.f0a/-2.262e,c.4d3/2.f0a/1.1284,10.16ef/2.f0a/-1.1284,d.54e/2.f0a/2.262e,-10.16ef/2.f0a/-2.20d4,-c.ce5/2.f0a/2.262e,-e.1edf/2.f0a/-2.252c,-b.c6a/2.f0a/1.1284";
			geo1.aUstr="1/0,0/0,1/1,0/1,0.1966d2cdd64c18/0.1de38aee8b2d44,0.287c17a75106f/0.22370681024fd0,0.1cbb2f023dd7ac/0.2ffae4b94aee7,0.1ca1e8a104167e/0.22504cbeb51e8e,0.18fa9a4c774100/0,0.1604b180a18dff/0,0.18fa9a4c774100/1,0.1604b180a18dff/1,0.193c6536f301f5/0,0.16260218d2877b/0,0.193c6536f301f5/1,0.16260218d2877b/1,0.19031fe30e5f63/0,0.2314613b163b1/0,0.19031fe30e5f63/1,0.2314613b163b1/1,0.182f365d8a9e7c/0,0.1642a602835eb1/0,0.182f365d8a9e7c/1,0.1642a602835eb1/1,0.192c4c349f50f0/0.1e0cb71c952c61,0.19319e2bf15921/0.2242acfab4ab78,0.1c9ccc17a4a85e/0.1e0ca93bde78ba,0.1ca21e327da2ff/0.22429ef6770560,0.199a108163410a/0.3706b549050846,0.197f867ee10dda/0.1dbdd11a0a51aa,0.1cd5bb60b62448/0.3683609c0b2650,0.1cbb315e33f118/0.1db0acb5a9c4a8,0.191fc170c91d2e/0,0.1609608b17c9b0/0,0.191fc170c91d2e/1,0.1609608b17c9b0/1,0.1e509045f804b1/0,0.1cc9c0f118d686/0,0.1e509045f804b1/1,0.1cc9c0f118d686/1,0.3069b1254e089/0,0.1ce4baaaf36320/0.00a6c751b204d3d,0.3069b1254e089/0.2353967b4997e4,0.1ce4baaaf36320/0.236c433bf8ffd2,0.1e2fa618cdf15f/0.2343820d5b2748,0.1e26127267ed7a/0.008823d670711320,0.1d4c77575fa59b/0.210add54e58ac6,0.2ec4a9244b8a6/0.0c2003bb4ec3c9";
			geo1.aV= read(geo1.aVstr).split(",");
			geo1.aU= read(geo1.aUstr).split(",");
			geo1.f="0,1,2,0,1,2,2,1,3,2,1,3,0,2,4,0,1,2,4,2,5,2,1,3,3,1,6,0,1,2,6,1,7,2,1,3,7,1,8,4,5,6,8,1,9,6,5,7,6,7,a,8,9,a,a,7,8,a,9,b,3,6,b,c,d,e,b,6,a,e,d,f,5,2,c,10,11,12,c,2,d,12,11,13,4,5,e,14,15,16,e,5,c,16,15,17,0,4,f,18,19,1a,f,4,e,1a,19,1b,1,0,9,1c,1d,1e,9,0,f,1e,1d,1f,2,3,d,20,21,22,d,3,b,22,21,23,a,8,b,24,25,26,b,8,9,26,25,27,e,c,f,28,29,2a,f,c,d,2a,29,2b,d,b,f,2c,2d,2e,f,b,9,2e,2d,2f";
			geos.push(geo1);
			var geo2:Object = {};
			geo2.aVstr="-1.0000/-2.df4/-1a.2032,-1.0000/2.df4/-1a.2032,1.0000/-2.df4/-1a.2032,1.0000/2.df4/-1a.2032,1.0000/2.df4/1a.2032,-1.0000/2.df4/1a.2032,1.0000/-2.df4/1a.2032,-1.0000/-2.df4/1a.2032";
			geo2.aUstr="0.1613bc96ad4bf2/0.0053986904f98328,0.1930e3ee86734b/0.0053986904f98328,0.1613bc96ad4bf2/0.23718be6f994c4,0.1930e3ee86734b/0.23718be6f994c4,0.168138b954c90b/0,0.17edc635ce3706/0,0.168138b954c90b/1,0.17edc635ce3706/1,0.1cbb4f9f1e6442/0.270f,0.1cbb4f9f1e6442/0.000188c9bcd1004dd,0.193cc01d394de3/0.270f,0.193cc01d394de3/0.000188c9bcd1004dd,1/0,0/0,1/1,0/1,0.1654ede09eb3a7/0,0.17ef1c6fb98f87/0,0.1654ede09eb3a7/1,0.17ef1c6fb98f87/1,0.1cc2e30adaf6e3/0,0.1e5fab98b08fb7/0,0.1cc2e30adaf6e3/1,0.1e5fab98b08fb7/1";
			geo2.aV= read(geo2.aVstr).split(",");
			geo2.aU= read(geo2.aUstr).split(",");
			geo2.f="0,1,2,0,1,2,2,1,3,2,1,3,4,5,6,4,5,6,6,5,7,6,5,7,5,1,7,8,9,a,7,1,0,a,9,b,7,0,6,c,d,e,6,0,2,e,d,f,6,2,4,10,11,12,4,2,3,12,11,13,1,5,3,14,15,16,3,5,4,16,15,17";
			geos.push(geo2);
			var geo3:Object = {};
			geo3.aVstr="b.c2d/-2.f0a/-1.24e2,-c.510/-2.f0a/-1.24e2,c.ca8/-2.f0a/-3.0323,-d.58b/-2.f0a/-3.0323,f.1500/-2.f0a/3.0323,10.157b/-2.f0a/1.24e2,-10.157b/-2.f0a/1.2232,-f.1500/-2.f0a/3.074,-f.1500/2.f0a/3.074,-c.510/2.f0a/-1.24e2,-10.157b/2.f0a/1.2232,-d.58b/2.f0a/-3.0323,10.157b/2.f0a/1.24e2,c.ca8/2.f0a/-3.0323,f.1500/2.f0a/3.0323,b.c2d/2.f0a/-1.24e2";
			geo3.aUstr="1/0,0/0,1/1,0/1,0.1966d2cdd64c18/0.1de38aee8b2d44,0.287c17a75106f/0.22370681024fd0,0.1cbb2f023dd7ac/0.2ffae4b94aee7,0.1ca1e8a104167e/0.22504cbeb51e8e,0.163062b8cd4a24/0,0.18384ea450bc4b/0,0.163062b8cd4a24/1,0.18384ea450bc4b/1,0.193c6536f301f5/0,0.16260218d2877b/0,0.193c6536f301f5/1,0.16260218d2877b/1,0.19031fe30e5f63/0,0.2314613b163b1/0,0.19031fe30e5f63/1,0.2314613b163b1/1,0.16487a6d57993b/0,0.1919ed05f4e2a4/0,0.16487a6d57993b/1,0.1919ed05f4e2a4/1,0.192c4c349f50f0/0.1e0cb71c952c61,0.19319e2bf15921/0.2242acfab4ab78,0.1c9ccc17a4a85e/0.1e0ca93bde78ba,0.1ca21e327da2ff/0.22429ef6770560,0.199a108163410a/0.3706b549050846,0.197f867ee10dda/0.1dbdd11a0a51aa,0.1cd5bb60b62448/0.3683609c0b2650,0.1cbb315e33f118/0.1db0acb5a9c4a8,0.191fc170c91d2e/0,0.1609608b17c9b0/0,0.191fc170c91d2e/1,0.1609608b17c9b0/1,0.1e509045f804b1/0,0.1cc9c0f118d686/0,0.1e509045f804b1/1,0.1cc9c0f118d686/1,0.3069b1254e089/0,0.1ce4baaaf36320/0.00a6c751b204d3d,0.3069b1254e089/0.2353967b4997e4,0.1ce4baaaf36320/0.236c433bf8ffd2,0.1e2fa618cdf15f/0.2343820d5b2748,0.1e26127267ed7a/0.008823d670711320,0.1d4c77575fa59b/0.210add54e58ac6,0.2ec4a9244b8a6/0.0c2003bb4ec3c9";
			geo3.aV= read(geo3.aVstr).split(",");
			geo3.aU= read(geo3.aUstr).split(",");
			geo3.f="0,1,2,0,1,2,2,1,3,2,1,3,0,2,4,0,1,2,4,2,5,2,1,3,3,1,6,0,1,2,6,1,7,2,1,3,7,1,8,4,5,6,8,1,9,6,5,7,6,7,a,8,9,a,a,7,8,a,9,b,3,6,b,c,d,e,b,6,a,e,d,f,5,2,c,10,11,12,c,2,d,12,11,13,4,5,e,14,15,16,e,5,c,16,15,17,0,4,f,18,19,1a,f,4,e,1a,19,1b,1,0,9,1c,1d,1e,9,0,f,1e,1d,1f,2,3,d,20,21,22,d,3,b,22,21,23,a,8,b,24,25,26,b,8,9,26,25,27,e,c,f,28,29,2a,f,c,d,2a,29,2b,d,b,f,2c,2d,2e,f,b,9,2e,2d,2f";
			geos.push(geo3);
			var geo4:Object = {};
			geo4.aVstr="-f.20f8/-1.1a26/-1b.686,-f.20f8/1.1a26/-1b.686,-12.a2f/-1.1a26/-1c.1ebb,-10.23a1/1.1a26/-1b.227d,-e.13b2/1.1a26/-1f.1293,-d.1109/1.1a26/-1e.1dac,-f.2150/-1.1a26/-20.ed2,-d.1109/-1.1a26/-1e.1dac,c.194a/-1.1a26/-1e.1882,c.194a/1.1a26/-1e.1882,e.1ca7/-1.1a26/-20.1999,d.163e/1.1a26/-1f.1475,10.16d1/1.1a26/-1c.1081,f.19dd/1.1a26/-1b.148e,11.1d39/-1.1a26/-1d.15a5,f.19dd/-1.1a26/-1b.148e,-d.0127/-1.1a26/1e.bc7,-d.0127/1.1a26/1e.bc7,-f.b2d/-1.1a26/20.562,-e.010d/1.1a26/1f.46b,-10.1d8f/1.1a26/1b.1da1,-f.1da9/1.1a26/1a.24fd,-12.09f/-1.1a26/1c.1e98,-f.1da9/-1.1a26/1a.24fd,f.268a/-1.1a26/1b.11f9,f.268a/1.1a26/1b.11f9,12.a2f/-1.1a26/1d.abb,10.26bd/1.1a26/1c.a3d,e.b7e/1.1a26/1f.191b,d.b4b/1.1a26/1e.20d7,f.15ff/-1.1a26/20.1999,d.b4b/-1.1a26/1e.20d7";
			geo4.aUstr="0.1cd04d60e8cfe9/0.660269d25ccba4,0.1dfd37bacbd49c/0.660269d25ccba4,0.1cd04d60e8cfe9/0.90688ebbf4977,0.1dfd37bacbd49c/0.90688ebbf4977,0.1d7266bd5a0db6/0.f8e265f9a6cdc,0.1df1aaca17b948/0.f93b7467aee05,0.1ce02c3d5db404/0.89add466b77758,0.1e0020d3fe5e63/0.dd12df3c91fc4,1/0,0/0,1/1,0/1,0.1e489b0399cc4d/0.eefc9e2c4defe,0.1e489b0399cc4d/0.82abc27bb1f770,0.1ce8c2342891eb/0.eefc9e2c4defe,0.1ce8c2342891eb/0.82abc27bb1f770,0.1cf28b6c082250/0.00184b1febd6b34e,0.1cf289101208e4/0.38d4b6bb58e46,0.30ab43461577b/0.0020a72a6c560d38,0.30ab43461577b/0.2384efd9217550,0.1cd17c0d984200/0.1b428fe91ef508,0.3060e32bc28ce/0.1b428fe91ef508,0.1cd17c0d984200/0.19d77dd7d6ac8d,0.3060e32bc28ce/0.19d77dd7d6ac8d,0.1d05a99009a949/0.1da37ca901aafb,0.1e2de973dbb2b3/0.1da37ca901aafb,0.1d05a99009a949/0.1c7b3cc52fa191,0.1e2de973dbb2b3/0.1c7b3cc52fa191,0.1d155536fb1a50/0.16d570d6b89e63,0.1d155536fb1a50/0.183aa7694a6012,0.302cb086d01b7/0.16d570d6b89e63,0.302cb086d01b7/0.183aa7694a6012,0.1e25925adbd48d/0.1c38ef6731ae44,0.1d05ca2cea35e0/0.1c38ef6731ae44,0.1e25925adbd48d/0.1d58b9f119665d,0.1d05ca2cea35e0/0.1d58b9f119665d,0.1cc61906162681/0.147a45e9073c7b,0.303d25d2af90c/0.147a45e9073c7b,0.1cc61906162681/0.1e903adfea944,0.303d25d2af90c/0.1e903adfea944,0.1de21f9c7fe268/0.12a1a2c07e76fb,0.1d006a0dd39528/0.12a1a2c07e76fb,0.1de21f9c7fe268/0.13835aab20dda7,0.1d006a0dd39528/0.13835aab20dda7,0.1812d1752bb976/0,0.163863a3730f33/0,0.1812d1752bb976/1,0.163863a3730f33/1,0.1e572cf274cb27/0.17265e04484431,0.1e572cf274cb27/0.152b4506b778cd,0.1ce2620980b1c9/0.17265e04484431,0.1ce2620980b1c9/0.152b4506b778cd,0.1e5bfef5c1acdb/0.16828802e4c7b9,0.1cf9e255efce9c/0.16828802e4c7b9,0.1e5bfef5c1acdb/0.1938cb502df807,0.1cf9e255efce9c/0.1938cb502df807,0.1ccb5ac0bb619f/0.13641ce63c3bed,0.1e38e3b460ce9c/0.13641ce63c3bed,0.1ccb5ac0bb619f/0.10e95970e6decc,0.1e38e3b460ce9c/0.10e95970e6decc,0.1d4be95f1cd907/0.136295d2c389c3,0.1e6656496afc44/0.136295d2c389c3,0.1d4be95f1cd907/0.112db9a23129dc,0.1e6656496afc44/0.112db9a23129dc,0.194b9c9226d929/0,0.16a2102a55036f/0,0.194b9c9226d929/1,0.16a2102a55036f/1,0.1e536b5aece860/0.1453803d26a25c,0.1e536b5aece860/0.fa947a6b0dfe0,0.1cd7fcd520aeb8/0.1453803d26a25c,0.1cd7fcd520aeb8/0.fa947a6b0dfe0,0.1e2a7952c1b62c/0.153cf344487483,0.1ce7d6f9a95ffc/0.153cf344487483,0.1e2a7952c1b62c/0.17c49c40335ee5,0.1ce7d6f9a95ffc/0.17c49c40335ee5";
			geo4.aV= read(geo4.aVstr).split(",");
			geo4.aU= read(geo4.aUstr).split(",");
			geo4.f="0,1,2,0,1,2,2,1,3,2,1,3,4,5,6,4,5,6,6,5,7,6,5,7,5,1,7,8,9,a,7,1,0,a,9,b,7,0,6,8,9,a,6,0,2,a,9,b,6,2,4,c,d,e,4,2,3,e,d,f,1,5,3,10,11,12,3,5,4,12,11,13,8,9,a,14,15,16,a,9,b,16,15,17,c,d,e,18,19,1a,e,d,f,1a,19,1b,d,9,f,8,9,a,f,9,8,a,9,b,f,8,e,8,9,a,e,8,a,a,9,b,e,a,c,1c,1d,1e,c,a,b,1e,1d,1f,9,d,b,20,21,22,b,d,c,22,21,23,10,11,12,24,25,26,12,11,13,26,25,27,14,15,16,28,29,2a,16,15,17,2a,29,2b,15,11,17,8,9,a,17,11,10,a,9,b,17,10,16,2c,2d,2e,16,10,12,2e,2d,2f,16,12,14,30,31,32,14,12,13,32,31,33,11,15,13,34,35,36,13,15,14,36,35,37,18,19,1a,38,39,3a,1a,19,1b,3a,39,3b,1c,1d,1e,3c,3d,3e,1e,1d,1f,3e,3d,3f,1d,19,1f,8,9,a,1f,19,18,a,9,b,1f,18,1e,40,41,42,1e,18,1a,42,41,43,1e,1a,1c,44,45,46,1c,1a,1b,46,45,47,19,1d,1b,48,49,4a,1b,1d,1c,4a,49,4b";
			geos.push(geo4);
			var geo5:Object = {};
			geo5.aVstr="-f.0000/-0.1ced/1e.0000,-f.0000/-0.1ced/-1e.0000,f.0000/-0.1ced/1e.0000,f.0000/-0.1ced/-1e.0000,f.0000/0.1ced/-1e.0000,-f.0000/0.1ced/-1e.0000,f.0000/0.1ced/1e.0000,-f.0000/0.1ced/1e.0000";
			geo5.aUstr="0.1eb157df1e40a2/0,0.0a307cdb7f2dd90/0.0053986904f98328,0.1eb157df1e40a2/1,0.011e8ac00090a8b/0.270f,0.15ff000ea3f977/0.00014e3d42c7f4081,0.00c8e2778c04c0a/0.0053986904f98328,0.15ff000ea3f977/0.270f,0.00c8e2778c04c0a/1,0.18cc7231ee6059/0,0.16838a6a6c208f/0.0053986904f98328,0.18cc7231ee6059/1,0.240d6bc9ba2cf/1,0.18fd572081b185/0.031a28ceadfdc24,0.17a03d5d8a0ea4/0.02cee612ee7ab1e,0.191d7454170613/0.3698d785065110,0.17b23ad919c99d/0.36208408ece4d8,0.18f047b0ba246e/0.0012c6adf16d26ed,0.173cde4526219b/0.0001491f964507eee,0.18f047b0ba246e/0.2356e14796d4fc,0.177a8840f565e2/0.236c47d05e403a,0.17a418a197242d/0,0.1666ac5adc7c6f/0,0.17a418a197242d/1,0.1666ac5adc7c6f/1";
			geo5.aV= read(geo5.aVstr).split(",");
			geo5.aU= read(geo5.aUstr).split(",");
			geo5.f="0,1,2,0,1,2,2,1,3,2,1,3,4,5,6,4,5,6,6,5,7,6,5,7,5,1,7,8,9,a,7,1,0,a,9,b,7,0,6,c,d,e,6,0,2,e,d,f,6,2,4,10,11,12,4,2,3,12,11,13,1,5,3,14,15,16,3,5,4,16,15,17";
			geos.push(geo5);
		}

		private function buildMaterials():void
		{
				var bort_right_Bitmap:Bitmap = new Bort_right_Bitmap_Bitmap();
				applyMaterialToMesh("bort_right", bort_right_Bitmap.bitmapData);

				var bort_bottom_Bitmap:Bitmap = new Bort_bottom_Bitmap_Bitmap();
				applyMaterialToMesh("bort_bottom", bort_bottom_Bitmap.bitmapData);

				var bort_left_Bitmap:Bitmap = new Bort_left_Bitmap_Bitmap();
				applyMaterialToMesh("bort_left", bort_left_Bitmap.bitmapData);

				var bort_top_Bitmap:Bitmap = new Bort_top_Bitmap_Bitmap();
				applyMaterialToMesh("bort_top", bort_top_Bitmap.bitmapData);

				var cube_Bitmap:Bitmap = new Cube_Bitmap_Bitmap();
				applyMaterialToMesh("Cube", cube_Bitmap.bitmapData);

				var ice_Bitmap:Bitmap = new Ice_Bitmap_Bitmap();
				applyMaterialToMesh("Ice", ice_Bitmap.bitmapData);

		}

		private function applyMaterialToMesh(id:String, bmd:BitmapData):void
		{
			for(var i:int;i<meshes.length;++i){
				if(meshes[i].name == id){
					if(!bmd){
						trace("Embed of "+id+" failed! Check source path or if CS4 call 911!");
					} else {
					meshes[i].material = new BitmapMaterial(bmd);
					}
					break;
				}
			}
		}

		private function cleanUp():void
		{
			for(var i:int = 0;i<6;++i){
				objs["obj"+i] == null;
			}
			aV = null;
			aU = null;
		}

		private function addContainers():void
		{
			aC = [];
			aC.push(this);
			var m0:MatrixAway3D = new MatrixAway3D();
			m0.sxx = 1;
			m0.sxy = 0;
			m0.sxz = 0;
			m0.tx = 0*_scale;
			m0.syx = 0;
			m0.syy = 1;
			m0.syz = 0;
			m0.ty = 0*_scale;
			m0.szx = 0;
			m0.szy = 0;
			m0.szz = 1;
			m0.tz = 0*_scale;
			transform = m0;
			name = "main";

			var cont1:ObjectContainer3D = new ObjectContainer3D();
			aC.push(cont1);
			addChild(cont1);
			var m1:MatrixAway3D = new MatrixAway3D();
			m1.sxx = 1;
			m1.sxy = 0;
			m1.sxz = 0;
			m1.tx = 0*_scale;
			m1.syx = 0;
			m1.syy = 1;
			m1.syz = 0;
			m1.ty = 0*_scale;
			m1.szx = 0;
			m1.szy = 0;
			m1.szz = 1;
			m1.tz = 0*_scale;
			cont1.transform = m1;
			cont1.name = "cont_1";

		}

		public function get containers():Array
		{
			return aC;
		}


		public function get meshes():Array
		{
			return oList;
		}


		private function read(str:String):String
		{
			var start:int= 0;
			var chunk:String;
			var end:int= 0;
			var dec:String = "";
			var charcount:int = str.length;
			for(var i:int = 0;i<charcount;++i){
				if (str.charCodeAt(i)>=44 && str.charCodeAt(i)<= 48 ){
					dec+= str.substring(i, i+1);
				}else{
					start = i;
					chunk = "";
					while(str.charCodeAt(i)!=44 && str.charCodeAt(i)!= 45 && str.charCodeAt(i)!= 46 && str.charCodeAt(i)!= 47 && i<=charcount){
						i++;
					}
					chunk = ""+parseInt("0x"+str.substring(start, i), 16 );
					dec+= chunk;
					i--;
				}
			}
			return dec;
		}

	}
}